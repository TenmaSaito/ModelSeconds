//================================================================================================================
//
// DirectXのモード変更のcppファイル [mode.cpp]
// Author : TENMA
//
//================================================================================================================
//*************************************************************************************************
//*** インクルードファイル ***
//*************************************************************************************************
#include "mode.h"
#include "edit.h"

//*************************************************************************************************
//*** マクロ定義 ***
//*************************************************************************************************

//**********************************************************************************
//*** プロトタイプ宣言 ***
//**********************************************************************************

//**********************************************************************************
//*** グローバル変数 ***
//**********************************************************************************
MODE g_mode = MODE_EDIT;								// 現在の画面

//==================================================================================
// --- タイトル関連cppファイルの初期化 ---
//==================================================================================
void InitMode(void)
{
	
}

//==================================================================================
// --- タイトル関連cppファイルの終了 ---
//==================================================================================
void UninitMode(void)
{
	// ゲーム画面の終了処理
	UninitEdit();
}

//==================================================================================
// --- タイトル関連cppファイルの更新 ---
//==================================================================================
void UpdateMode(void)
{
	switch (g_mode)
	{
		// エディタ画面
	case MODE_EDIT:
		UpdateEdit();
		break;
	}
}

//==================================================================================
// --- タイトル関連cppファイルの描画 ---
//==================================================================================
void DrawMode(void)
{
	// デバイスの取得
	LPDIRECT3DDEVICE9 pDevice = GetDevice();
	D3DVIEWPORT9 viewportDef;		// デフォルトビューポート

	// ビューポートの保存
	pDevice->GetViewport(&viewportDef);

	/*** 現在の画面(モード)の描画処理 ***/
	switch (g_mode)
	{
		// エディタ画面
	case MODE_EDIT:
		DrawEdit();
		break;
	}

	// ビューポートの設定
	pDevice->SetViewport(&viewportDef);

	EndDevice();
}

//==================================================================================
// --- 画面の設定 ---
//==================================================================================
void SetMode(MODE mode)
{
	// 現在の画面(モード)の終了
	switch (g_mode)
	{
		// エディタ画面
	case MODE_EDIT:
		UninitEdit();
		break;
	}

	// 指定の画面(モード)の初期化処理
	switch (mode)
	{
		// エディタ画面
	case MODE_EDIT:
		InitEdit();
		break;
	}

	// モードを保存
	g_mode = mode;
}

//==================================================================================
// --- デバイスリセット ---
//==================================================================================
void ResetMode(bool bLost)
{
	// 指定の画面(モード)の初期化処理
	switch (g_mode)
	{
		// エディタ画面
	case MODE_EDIT:
		ResetEdit(bLost);
		break;
	}
}

//==================================================================================
// --- 現在のモードを取得 ---
//==================================================================================
MODE GetMode(void)
{
	return g_mode;
}